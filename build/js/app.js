!function(e){function t(t){for(var i,s,a=t[0],c=t[1],h=t[2],p=0,u=[];p<a.length;p++)s=a[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(l&&l(t);u.length;)u.shift()();return r.push.apply(r,h||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={0:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var h=0;h<a.length;h++)t(a[h]);var l=c;r.push([46,1]),n()}({25:function(e,t,n){var i=n(26),o=n(27);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};i(o,r);e.exports=o.locals||{}},27:function(e,t,n){(t=n(28)(!1)).push([e.i,'html,body{margin:0;padding:0;width:100%;height:100%}body{background-color:#000;overflow:hidden}.common_container{position:fixed;top:0;left:0;z-index:1}#content_container{position:relative}#gallery_container{position:fixed;top:0;left:0;z-index:10;visibility:visible}#dialog{position:fixed;top:0;left:0;color:#fff}#dialog button{padding:1em;font-size:1em}#buttons{position:fixed;top:0;right:0;z-index:1;background:#fff}#detail_container{position:fixed;top:0;left:0;z-index:20;visibility:hidden}#blocker{position:absolute;top:0;left:0;bottom:0;right:0}#background_container{position:fixed;top:0;left:0;z-index:5}#WebGL-output{width:100%;height:100%}#xr_mode #content_container{position:fixed}#xr_mode #xr_scene{z-index:200}#xr_mode #gallery_stage_overlay{position:fixed;width:100%;height:100%;z-index:2;background-color:#000}#xr_mode .gallery_poster_title{position:absolute;width:14.5em;height:5em;font-size:36px;line-height:1.4;color:#fff;font-family:"Helvetica Neue",Arial,"Hiragino Kaku Gothic ProN","Hiragino Sans",Meiryo,sans-serif;font-weight:bold;background-color:rgba(0,0,0,.8);padding:.5em;box-sizing:border-box}',""]),e.exports=t},46:function(e,t,n){"use strict";n.r(t);n(25);var i={init:function(){Object.defineProperty(Object.prototype,"forIn",{value:function(e,t){t=t||this,Object.keys(this).forEach((function(n,i){var o=this[n];e.call(t,n,o,i)}),this)}}),Object.defineProperty(Object.prototype,"isEmpty",{value:function(e,t){return!Object.keys(this).length}})}},o=32,r="ShowDetail",s={enable:!1},a="gallery_container",c="gallery_stage",h="detail_container",l="detail_stage",p="detail_blocker",u="xr_scene",f="xr_player",d="xr_raycaster",m="xr_raycast_target",g="background-component",y="gallery-component",v="detail-component",b="raycast-check-component",w="raycast-target-component",T=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s.enable},P=function(){return window.innerWidth},O=function(){return window.innerHeight},_={init:function(){return this},setup:function(){},update:function(){},draw:function(){},destroy:function(){},onResize:function(){},onMouseMove:function(e){},onKeyUp:function(e){},onClick:function(e){}},E=n(0),j=n(20),k=n(21),C=n(9),x=n(4),S=n(23),M=n(24),B=n(3),A=n(7),L={uniforms:{tDiffuse:{value:null},color:{value:new A.Color(16711680)},color2:{value:new A.Color(16711680)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform vec3 color2;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec3 gradate = color * vUv.y + color2 * (1.0 - vUv.y);","gl_FragColor = vec4(v * gradate, texel.w );","}"].join("\n")};function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initStats=this._initStats.bind(this),this._stats=this._initStats(),this._scene=t,this._renderer=new E.WebGLRenderer({antialias:!0,alpha:!0}),this._renderer.setClearColor(new E.Color(0),0),this._renderer.setSize(window.innerWidth,window.innerHeight),this._renderer.setPixelRatio(1),this._wrapper=document.getElementById("WebGL-output"),this._wrapper.appendChild(this._renderer.domElement),this.clock=new E.Clock,this.onResize();var n=new C.a(this._scene.scene0.scene1,this._scene.camera);n.clear=!0;var i=new C.a(this._scene.scene0.scene2,this._scene.camera);i.clear=!1;var o=new x.a(L);o.uniforms.color.value=new E.Color(7556260),o.uniforms.color2.value=new E.Color(322168),o.uniforms.alpha=.8,o.enabled=!0;var r=new S.a(2,15,3,64);r.enabled=!0;var s=new x.a(B.a);s.renderToScreen=!0,this.composer=new M.a(this._renderer),this.composer.renderTarget1.stencilBuffer=!0,this.composer.renderTarget2.stencilBuffer=!0,this.composer.addPass(n),this.composer.addPass(i),this.composer.addPass(o),this.composer.addPass(r),this.composer.addPass(s);var a=new function(){this.select="Colorify",this.color=5154702,this.color2=2915734,this.strength=.1,this.kernelSize=5,this.sigma=1,this.resolution=64,this.changeColor=function(){o.uniforms.color.value=new E.Color(a.color)},this.changeColor2=function(){o.uniforms.color2.value=new E.Color(a.color2)}},c=new j.a;c.add(a,"select",["colorify","BloomPass"]).onChange(a.switchShader);var h=c.addFolder("Colorify");h.addColor(a,"color").onChange(a.changeColor),h.addColor(a,"color2").onChange(a.changeColor2);var l=c.addFolder("BloomPass");l.add(a,"strength",1,10).onChange(a.updateEffectBloom),l.add(a,"kernelSize",1,100).onChange(a.updateEffectBloom),l.add(a,"sigma",1,10).onChange(a.updateEffectBloom),l.add(a,"resolution",0,1024).onChange(a.updateEffectBloom),this.update()}var t,n,i;return t=e,(n=[{key:"update",value:function(){this._stats.update(),this._renderer.autoClear=!1,this._scene.update(),this.composer.render()}},{key:"onKeyUp",value:function(e){this._scene.onKeyUp(e)}},{key:"addEvent",value:function(){this._scene.addEvent()}},{key:"draw",value:function(){}},{key:"onResize",value:function(){var e=this._wrapper.clientWidth,t=this._wrapper.clientHeight;this._renderer.domElement.setAttribute("width",String(e)),this._renderer.domElement.setAttribute("height",String(t)),this._renderer.setPixelRatio(window.devicePixelRatio||1),this._renderer.setSize(e,t),this._scene.camera.aspect=e/t,this._scene.camera.updateProjectionMatrix()}},{key:"_initStats",value:function(){return this._stats=new k.a,this._stats.setMode(0),this._stats.domElement.style.position="absolute",this._stats.domElement.style.left="0px",this._stats.domElement.style.top="0px",document.getElementById("Stats-output").appendChild(this._stats.domElement),this._stats}}])&&R(t.prototype,n),i&&R(t,i),e}();function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function W(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){K(n,e);var t=H(n);function n(){var e;return I(this,n),(e=t.call(this,45,window.innerWidth/window.innerHeight,1,1e3)).frame=1e3,e.camPos=new E.Vector3(100,100,120),e.camTarget=new E.Vector3(-270,300,320),e.lookPos=new E.Vector3(45,50,45),e.lookTarget=new E.Vector3(45,50,45),e.getCamPos=e.getCamPos.bind(N(e)),e}return W(n,[{key:"update",value:function(){this.frame+=1,this.camPos.x+=.01*(this.camTarget.x-this.camPos.x),this.camPos.y+=.01*(this.camTarget.y-this.camPos.y),this.camPos.z+=.01*(this.camTarget.z-this.camPos.z),this.position.set(this.camPos.x,this.camPos.y,this.camPos.z),this.frame>=0&&this.frame<1320?(this.lookAt(new E.Vector3(45,50,45)),350==this.frame&&(this.camTarget=new E.Vector3(420,80,-100)),800==this.frame&&(this.camTarget=new E.Vector3(-140,180,160)),1100==this.frame&&(this.camTarget=new E.Vector3(-300,30,-220))):this.frame>=1320&&(this.lookPos.x+=.02*(this.lookTarget.x-this.lookPos.x),this.lookPos.y+=.02*(this.lookTarget.y-this.lookPos.y),this.lookPos.z+=.02*(this.lookTarget.z-this.lookPos.z),this.lookAt(this.lookPos),1370==this.frame&&(this.lookTarget=new E.Vector3(140,70,140)),1370==this.frame&&(this.camTarget=new E.Vector3(-200,75,200)),1470==this.frame&&(this.camTarget=new E.Vector3(100,70,100)))}},{key:"getCamPos",value:function(){}}]),n}(E.PerspectiveCamera),J=(E.PerspectiveCamera,E.PerspectiveCamera,n(5));function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return $(this,n)}}function $(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(r,e);var t,n,i,o=Q(r);function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=o.call(this)).frame=0,e.prepareMesh=e.prepareMesh.bind(ee(e)),e.checkIntersection=e.checkIntersection.bind(ee(e)),e.meshes={},e.meshes[0]||(e.meshes[0]=e.prepareMesh()),e}return t=r,(n=[{key:"prepareMesh",value:function(){for(var e=new Float32Array(300),t=0;t<e.length;t+=3)e[t]=e[t+1]=e[t+2]=0;var n=new J.MeshLine;n.setGeometry(e,(function(e){return e}));var i=new J.MeshLineMaterial({color:16776960,lineWidth:.6,depthTest:!1});return this.mesh=new E.Mesh(n.geometry,i),this.mesh.geo=e,this.mesh.g=n,this.add(this.mesh),this.mesh}},{key:"checkIntersection",value:function(){this.mesh=this.meshes[0];for(var e=this.mesh.geo,t=this.mesh.g,n=0;n<e.length;n+=3)e[n]=1*e[n+3],e[n+1]=1*e[n+4],e[n+2]=1*e[n+5];var i=Math.random(),o=100*(2*Math.random()-1);i>.66?(e[e.length-6]>90&&o>0&&(o*=-1),e[e.length-6]<-90&&o<0&&(o*=-1),e[e.length-3]=e[e.length-6]+o,e[e.length-2]=e[e.length-5],e[e.length-1]=e[e.length-4]):i>.33?(e[e.length-5]>90&&o>0&&(o*=-1),e[e.length-5]<-90&&o<0&&(o*=-1),e[e.length-3]=e[e.length-6],e[e.length-2]=e[e.length-5]+o,e[e.length-1]=e[e.length-4]):(e[e.length-4]>90&&o>0&&(o*=-1),e[e.length-4]<-90&&o<0&&(o*=-1),e[e.length-3]=e[e.length-6],e[e.length-2]=e[e.length-5],e[e.length-1]=e[e.length-4]+o),t.setGeometry(e)}},{key:"update",value:function(){if(this.frame+=1,this.frame%4==0)for(var e in this.meshes)this.checkIntersection(e)}}])&&Y(t.prototype,n),i&&Y(t,i),r}(E.Object3D),ie=32,oe=65,re=66,se=67,ae=8;function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pe(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ge(e);if(t){var o=ge(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=function(e){ue(n,e);var t=de(n);function n(){var e;return he(this,n),(e=t.call(this)).camera=new q,e.scene0=new ve,e.add(e.scene0),e.camTargetBool_openingIsEnd=!1,e.camTargetBool_A=!1,e.camTargetBool_B=!1,e.camTargetBool_C=!1,e.camTargetBool_BACKSPACE=!1,e.selectVRorNot=!1,e}return pe(n,[{key:"update",value:function(){1==this.scene0.scene2.openingIsEnd&&(console.log("Opening is end and select VR or not"),this.scene0.scene2.openingIsEnd=!1),this.camera.update(),this.scene0.update()}},{key:"onKeyUp",value:function(e){e.keyCode==ie&&(console.log("show 7 panels!"),console.log("this.camTargetBool_openingIsEnd: ".concat(this.camTargetBool_openingIsEnd)),0==this.camTargetBool_openingIsEnd&&(this.camTargetBool_openingIsEnd=!0,this.camera.camTarget=new E.Vector3(-200,70,400),console.log("this.camTargetBool_openingIsEnd: ".concat(this.camTargetBool_openingIsEnd)))),e.keyCode==oe&&(console.log("Please go to room_A!"),0==this.camTargetBool_A&&(this.camTargetBool_A=!0,this.camera.camTarget=new E.Vector3(28,40,28),this.camera.lookTarget=new E.Vector3(30,40,30),this.camTargetBool_BACKSPACE=!1,this.camTargetBool_B=!0,this.camTargetBool_C=!0)),e.keyCode==re&&(console.log("Please go to room_B!"),0==this.camTargetBool_B&&(this.camTargetBool_B=!0,this.camera.camTarget=new E.Vector3(112,85,112),this.camera.lookTarget=new E.Vector3(120,85,120),this.camTargetBool_BACKSPACE=!1,this.camTargetBool_A=!0,this.camTargetBool_C=!0)),e.keyCode==se&&(console.log("Please go to room_C!"),0==this.camTargetBool_C&&(this.camTargetBool_C=!0,this.camera.camTarget=new E.Vector3(196,130,196),this.camera.lookTarget=new E.Vector3(210,130,210),this.camTargetBool_BACKSPACE=!1,this.camTargetBool_B=!0,this.camTargetBool_A=!0)),e.keyCode==ae&&(console.log("Please back to 7 panels!"),0==this.camTargetBool_BACKSPACE&&(this.camTargetBool_BACKSPACE=!0,this.camera.camTarget=new E.Vector3(-300,70,300),this.camera.lookTarget=new E.Vector3(140,70,140),this.camTargetBool_A=!1,this.camTargetBool_B=!1,this.camTargetBool_C=!1))}}]),n}(E.Scene),ve=function(e){ue(n,e);var t=de(n);function n(){var e;he(this,n),e=t.call(this);var i=new E.AmbientLight(16777215,.4),o=new E.SpotLight(16777215);return o.position.set(80,60,50),o.intensity=1,e.scene1=new be,e.add(e.scene1),e.scene2=new we,e.scene2.add(i),e.scene2.add(o),e.add(e.scene2),e}return pe(n,[{key:"update",value:function(){this.scene1.update(),this.scene2.update()}}]),n}(E.Scene),be=function(e){ue(n,e);var t=de(n);function n(){var e;return he(this,n),(e=t.call(this))._line=new ne,e._line.position.set(150,70,150),e.add(e._line),e._line2=new ne,e._line.position.set(150,70,150),e.add(e._line2),e}return pe(n,[{key:"update",value:function(){this._line.update(),this._line2.update()}}]),n}(E.Scene),we=function(e){ue(n,e);var t=de(n);function n(){var e;he(this,n),(e=t.call(this)).frame=1e3,e.meshList=[],e.meshGroup=new E.Group;var i=new E.MeshBasicMaterial({color:16777215,wireframe:!0,opacity:.9,transparent:!0});e.PlateNum=320,e.positions=[],e.posTarget=[];for(var o=0;o<e.PlateNum;o++)e.floorsize=27,e.geometry=new E.PlaneBufferGeometry(e.floorsize,e.floorsize),e.mesh=new E.Mesh(e.geometry,i),e.mesh.position.set(0,0,0),e.mesh.rotation.x=90*Math.PI/180,e.meshGroup.add(e.mesh),e.meshList.push(e.mesh),e.positions.push(e.mesh.position.x,e.mesh.position.y,e.mesh.position.z),e.posTarget.push(0,0,0);return e.add(e.meshGroup),e.clock=new E.Clock,e.tSpeed=2,e.easeElapsedTime=0,e.eansingBool=!0,e.openingIsEnd=!1,e}return pe(n,[{key:"update",value:function(){if(this.frame+=1,1==this.eansingBool){this.easeElapsedTime+=this.clock.getDelta(),this.t=this.easeElapsedTime/this.tSpeed,this.t>1&&(this.t=1),this.rate=this.t*this.t*(3-2*this.t);for(var e=0;e<this.meshList.length;e++){this.meshList[e].position.x=this.positions[3*e+0],this.meshList[e].position.y=this.positions[3*e+1],this.meshList[e].position.z=this.positions[3*e+2];for(var t=0;t<3;t++){var n=this.positions[3*e+t],i=this.posTarget[3*e+t];this.positions[3*e+t]=n*(1-this.rate)+i*this.rate}}}if(50==this.frame){for(var o=0;o<this.meshList.length;o++)for(var r=0;r<4;r++)o>=80*r&&o<80*(r+1)&&(this.posTarget[3*o+0]=25*r,this.posTarget[3*o+1]=0,this.posTarget[3*o+2]=0);this.easeElapsedTime=0,this.tSpeed=3}if(110==this.frame){for(var s=0;s<this.meshList.length;s++)for(var a=0;a<4;a++)if(s>=80*a&&s<80*(a+1))for(var c=0;c<4;c++)s>=80*a+20*c&&s<80*a+20*(c+1)&&(this.posTarget[3*s+0]=25*a,this.posTarget[3*s+1]=0,this.posTarget[3*s+2]=25*c);this.easeElapsedTime=0}if(170==this.frame){for(var h=0;h<this.meshList.length;h++)for(var l=0;l<4;l++)if(h>=80*l&&h<80*(l+1))for(var p=0;p<4;p++)if(h>=80*l+20*p&&h<80*l+20*(p+1))for(var u=0;u<20;u++)h>=80*l+20*p+1*u&&h<80*l+20*p+1*(u+1)&&(this.posTarget[3*h+0]=25*l,this.posTarget[3*h+1]=7*u,this.posTarget[3*h+2]=25*p);this.easeElapsedTime=0,this.tSpeed=4}if(280==this.frame){for(var f=0;f<this.meshList.length;f++)for(var d=0;d<4;d++)if(f>=80*d&&f<80*(d+1))for(var m=0;m<4;m++)if(f>=80*d+20*m&&f<80*d+20*(m+1))for(var g=0;g<10;g++)f>=80*d+20*m+2*g&&f<80*d+20*m+2*(g+1)&&(this.posTarget[3*f+0]=45*m,this.posTarget[3*f+1]=10*g,this.posTarget[3*f+2]=45*d);this.easeElapsedTime=0,this.tSpeed=4}if(430==this.frame){for(var y=0;y<this.meshList.length;y++)for(var v=0;v<4;v++)if(y>=80*v&&y<80*(v+1))for(var b=0;b<4;b++)if(y>=80*v+20*b&&y<80*v+20*(b+1))for(var w=0;w<10;w++)y>=80*v+20*b+2*w&&y<80*v+20*b+2*(w+1)&&(this.posTarget[3*y+0]=45*v,this.posTarget[3*y+1]=0,this.posTarget[3*y+2]=45*b);this.easeElapsedTime=0,this.tSpeed=7}if(490==this.frame){for(var T=0;T<this.meshList.length;T++)for(var P=0;P<4;P++)if(T>=80*P&&T<80*(P+1))for(var O=0;O<4;O++)if(T>=80*P+20*O&&T<80*P+20*(O+1))for(var _=0;_<10;_++)T>=80*P+20*O+2*_&&T<80*P+20*O+2*(_+1)&&(this.posTarget[3*T+0]=30*P,this.posTarget[3*T+1]=0,this.posTarget[3*T+2]=30*O);this.easeElapsedTime=0,this.tSpeed=4}if(550==this.frame){for(var E=0;E<this.meshList.length;E++)for(var j=0;j<8;j++)if(E>=40*j&&E<40*(j+1))for(var k=0;k<8;k++)if(E>=40*j+5*k&&E<40*j+5*(k+1))for(var C=0;C<5;C++)E>=40*j+5*k+1*C&&E<40*j+5*k+1*(C+1)&&(this.posTarget[3*E+0]=15*j,this.posTarget[3*E+1]=0,this.posTarget[3*E+2]=15*k);this.easeElapsedTime=0,this.tSpeed=4}if(600==this.frame){for(var x=0;x<this.meshList.length;x++)for(var S=0;S<8;S++)if(x>=40*S&&x<40*(S+1))for(var M=0;M<8;M++)if(x>=40*S+5*M&&x<40*S+5*(M+1))for(var B=0;B<5;B++)x>=40*S+5*M+1*B&&x<40*S+5*M+1*(B+1)&&(this.posTarget[3*x+0]=20*S,this.posTarget[3*x+1]=30*Math.sin((30*(S+M)+2*(this.frame+60))*Math.PI/180),this.posTarget[3*x+2]=20*M);this.easeElapsedTime=0}if(660==this.frame&&(this.eansingBool=!1),this.frame>=660&&this.frame<780){for(var A=0;A<this.meshList.length;A++)this.meshList[A].position.x=this.positions[3*A+0],this.meshList[A].position.y=this.positions[3*A+1],this.meshList[A].position.z=this.positions[3*A+2];for(var L=0;L<this.meshList.length;L++)for(var R=0;R<8;R++)if(L>=40*R&&L<40*(R+1))for(var z=0;z<8;z++)if(L>=40*R+5*z&&L<40*R+5*(z+1))for(var D=0;D<5;D++)L>=40*R+5*z+1*D&&L<40*R+5*z+1*(D+1)&&(this.positions[3*L+0]=20*R,this.positions[3*L+1]=30*Math.sin((30*(R+z)+2*this.frame)*Math.PI/180),this.positions[3*L+2]=20*z)}if(780==this.frame&&(this.eansingBool=!0),780==this.frame){for(var I=0;I<this.meshList.length;I++)for(var V=0;V<8;V++)if(I>=40*V&&I<40*(V+1))for(var W=0;W<8;W++)if(I>=40*V+5*W&&I<40*V+5*(W+1))for(var K=0;K<5;K++)I>=40*V+5*W+1*K&&I<40*V+5*W+1*(K+1)&&(this.posTarget[3*I+0]=80*Math.sin(2*I*Math.PI/180)+50,this.posTarget[3*I+1]=25,this.posTarget[3*I+2]=80*Math.cos(2*I*Math.PI/180)+50);this.easeElapsedTime=0,this.tSpeed=30}if(900==this.frame){for(var U=0;U<this.meshList.length;U++)for(var H=0;H<4;H++)if(U>=80*H&&U<80*(H+1))for(var G=0;G<4;G++)if(U>=80*H+20*G&&U<80*H+20*(G+1))for(var N=0;N<10;N++)U>=80*H+20*G+2*N&&U<80*H+20*G+2*(N+1)&&(this.posTarget[3*U+0]=4*G+50,this.posTarget[3*U+1]=1.5*N+25,this.posTarget[3*U+2]=4*H+50);this.easeElapsedTime=0,this.tSpeed=8}if(1e3==this.frame){for(var F=0;F<this.meshList.length;F++)for(var q=0;q<4;q++)if(F>=80*q&&F<80*(q+1))for(var J=0;J<4;J++)if(F>=80*q+20*J&&F<80*q+20*(J+1))for(var X=0;X<10;X++)F>=80*q+20*J+2*X&&F<80*q+20*J+2*(X+1)&&(this.posTarget[3*F+0]=70*Math.sin(4*F*Math.PI/180)+50,this.posTarget[3*F+1]=70*Math.cos(40*(q+J+X)*Math.PI/180)+25,this.posTarget[3*F+2]=-70*Math.sin(8*F*Math.PI/180)+50);this.easeElapsedTime=0,this.tSpeed=12}if(1150==this.frame){for(var Y=0;Y<this.meshList.length;Y++)for(var Z=0;Z<4;Z++)if(Y>=80*Z&&Y<80*(Z+1))for(var Q=0;Q<4;Q++)if(Y>=80*Z+20*Q&&Y<80*Z+20*(Q+1))for(var $=0;$<10;$++)Y>=80*Z+20*Q+2*$&&Y<80*Z+20*Q+2*($+1)&&(this.posTarget[3*Y+0]=25*Z,this.posTarget[3*Y+1]=0,this.posTarget[3*Y+2]=25*Q);this.easeElapsedTime=0,this.tSpeed=4}if(1270==this.frame){for(var ee=0;ee<this.meshList.length;ee++)for(var te=0;te<4;te++)if(ee>=80*te&&ee<80*(te+1))for(var ne=0;ne<4;ne++)if(ee>=80*te+20*ne&&ee<80*te+20*(ne+1))for(var ie=0;ie<20;ie++)ee>=80*te+20*ne+1*ie&&ee<80*te+20*ne+1*(ie+1)&&(this.posTarget[3*ee+0]=20*te,this.posTarget[3*ee+1]=5*ie,this.posTarget[3*ee+2]=20*ne);this.easeElapsedTime=0,this.tSpeed=4}if(1370==this.frame){for(var oe=0;oe<this.meshList.length;oe++)for(var re=0;re<4;re++)if(oe>=80*re&&oe<80*(re+1))for(var se=0;se<4;se++)if(oe>=80*re+20*se&&oe<80*re+20*(se+1))for(var ae=0;ae<10;ae++)oe>=80*re+20*se+2*ae&&oe<80*re+20*se+2*(ae+1)&&(this.posTarget[3*oe+0]=25*(re+ae),this.posTarget[3*oe+1]=15*ae,this.posTarget[3*oe+2]=25*(se+ae));this.easeElapsedTime=0,this.tSpeed=10}1870==this.frame&&0==this.openingIsEnd&&(this.openingIsEnd=!0)}}]),n}(E.Scene);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=Pe(Pe({},_),{},{props:{instance:null},init:function(){return this.props.instance=new z(new ye),this},setup:function(){},update:function(){this.props.instance.update()},draw:function(){this.props.instance.draw()},destroy:function(){},onKeyUp:function(e){this.props.instance.onKeyUp(e)}}),Ee=n(22),je=n(6),ke={imgPath:["./img/poster01.png","./img/poster02.png","./img/poster03.png","./img/poster04.png","./img/poster05.png","./img/poster06.png","./img/poster07.png","./img/poster08.png","./img/poster09.png","./img/poster10.png"],posterTitle:["ネットワークとクラウドを\n活用してデータ収集から解析まで","双方向化技術によるデータベーススキーマの共存","サイエンスによる知的ものづくり教育プログラム","プログラミング講義向けJupyter Notebook環境","Notebookで賢く運用！NIIの研究クラウド","再構成可能デバイスを使いやすくする研究","漸進的型付け: 安全性と柔軟性を\n両立するプログラミング言語","不具合局所化のための\nプログラムスペクトルの可視化ならびに分析","経路計画機能のテスト・設定調整の自動探索","適切な「ぼかし」で、ソフトウェアの複雑さに挑む"]};function Ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var xe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parameter=t||{},this.imgPath=this.parameter.imgPath,this.posterTitle=this.parameter.posterTitle,this.boardWidth=80,this.boardHeight=45,this.fontSize=3.5,this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.textureLoad()}},{key:"createPlaneObject",value:function(){var e=new E.PlaneGeometry(this.boardWidth,this.boardHeight),t=new E.MeshBasicMaterial({map:this.imgTexture,transparent:!0,opacity:0});this.plane=new E.Mesh(e,t),t.opacity=0;var n=this.createLabel(this.posterTitle),i=new E.WireframeGeometry(e),o=new E.LineSegments(i);return o.material.depthTest=!1,o.material.opacity=0,o.material.transparent=!0,this.poster=new E.Group,this.poster.add(n),this.poster.add(this.plane),this.poster.add(o),this.poster}},{key:"textureLoad",value:function(){var e=new E.TextureLoader;this.imgTexture=e.load(this.imgPath)}},{key:"log",value:function(){console.log("boster call")}},{key:"createLabel",value:function(e){var t=document.createElement("canvas");t.width=4*this.boardWidth,t.height=2*this.boardHeight;var n=t.getContext("2d");n.scale(4,4),n.font=this.fontSize+"px Arial, meiryo, sans-serif",n.fillStyle="rgba(255,255,255,1)";var i=e.split("\n"),o=1.2*n.measureText("あ").width;i.forEach((function(e,t){n.fillText(e,0,10+o*t)}));var r=new E.Texture(t);r.needsUpdate=!0;var s=new E.PlaneGeometry(t.width/4,t.height/4),a=new E.MeshBasicMaterial({map:r,transparent:!0,opacity:0}),c=new E.Mesh(s,a);return c.position.y=-35,c}}])&&Ce(t.prototype,n),i&&Ce(t,i),e}();function Se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.setup(),this.createScene(),this.createCamera(),this.addOrbitControls(),this.addAmbientLight(),this.addDirectionalLight(),this.addBorad()}},{key:"setup",value:function(){this.mesheList=[],this.backgroundColor="#000000",this.width=window.innerWidth,this.height=window.innerHeight,this.mouse3D=new E.Vector2,this.meshList=[],this.raycaster=new E.Raycaster,this.rayReceiveObjects=[],this.posterData=ke,this.boardLength=this.posterData.imgPath.length,this.boardPosRadius=200,this.boardAngle=180/this.boardLength,this.categoryAngle=180+this.boardAngle/2}},{key:"draw",value:function(){this.raycaster.setFromCamera(this.mouse3D,this.camera);var e=this.raycaster.intersectObjects(this.rayReceiveObjects);this.rayReceiveObjects.map((function(t){e.length>0&&t===e[0].object?t.material.color.setHex(16777215):t.material.color.setHex(2236962)})),this.controls.update(),je.a.update(),this.renderer.render(this.scene,this.camera)}},{key:"onMouseMove",value:function(e){var t=e.clientX,n=e.clientY;this.mouse3D.x=t/this.width*2-1,this.mouse3D.y=-n/this.height*2+1}},{key:"onResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}},{key:"onClick",value:function(e){var t=this.raycaster.intersectObjects(this.rayReceiveObjects);if(t.length>0){var n=t[0].object.name;console.dir(n),document.dispatchEvent(new CustomEvent(r,{detail:{message:"Please show me a detail!"}}))}}},{key:"addBorad",value:function(){for(var e=this,t=function(t){var n={imgPath:e.posterData.imgPath[t],posterTitle:e.posterData.posterTitle[t]};e.board=new xe(n);var i=e.board.createPlaneObject(),o=void 0;o=t%2==0?20:-50,i.position.set(e.boardPosRadius*Math.cos(E.Math.degToRad(t*e.boardAngle+e.categoryAngle)),o,e.boardPosRadius*Math.sin(E.Math.degToRad(t*e.boardAngle+e.categoryAngle))),i.lookAt(new E.Vector3(0,0,0)),e.scene.add(i),e.meshList.push(i),e.meshList[t].children[1].name="poster"+t,e.rayReceiveObjects.push(e.meshList[t].children[1]);var r={x:i.position.x,y:i.position.y,z:i.position.z,alpha:i.children[0].material.opacity},s={x:r.x,y:r.y+100,z:r.z,alpha:1},a=new je.a.Tween(r).to(s,500).easing(je.a.Easing.Cubic.InOut).onUpdate((function(){i.position.x=r.x,i.position.y=r.y,i.position.z=r.z,i.children[2].material.opacity=r.alpha})).delay(1e3+50*t).start(),c={alphaA:0,alphaB:1},h=new je.a.Tween(c).to({alphaA:1,alphaB:0},500).easing(je.a.Easing.Cubic.InOut).onUpdate((function(){i.children[0].material.opacity=c.alphaA,i.children[1].material.opacity=c.alphaA,i.children[2].material.opacity=c.alphaB})).delay(1e3+10*t);a.chain(h)},n=0;n<this.boardLength;n++)t(n)}},{key:"addNullBox",value:function(){var e=new E.BoxGeometry(10,10,10),t=new E.MeshNormalMaterial;this.nullMesh=this.getMesh(e,t),this.scene.add(this.nullMesh);var n=0,i=80,o=-50;this.nullMesh.position.set(n,i,o)}},{key:"createScene",value:function(){this.scene=new E.Scene,this.renderer=new E.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(this.backgroundColor),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=E.PCFSoftShadowMap,this.renderer.autoClear=!1,document.getElementById(c).appendChild(this.renderer.domElement)}},{key:"createCamera",value:function(){this.camera=new E.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1),this.camera.position.set(0,80,150),this.camera.lookAt(new E.Vector3(0,50,-80)),this.scene.add(this.camera)}},{key:"addOrbitControls",value:function(){this.controls=new Ee.a(this.camera,this.renderer.domElement),this.controls.minPolarAngle=0,this.controls.maxPolarAngle=Math.PI,this.controls.minDistance=0,this.controls.maxDistance=1/0,this.enableZoom=!0,this.zoomSpeed=1,this.controls.enablePan=!0}},{key:"addAmbientLight",value:function(){var e=new E.AmbientLight(4210752,1);this.scene.add(e)}},{key:"addDirectionalLight",value:function(){var e=new E.DirectionalLight(16777215,1);e.position.set(0,300,30),this.scene.add(e)}},{key:"addSpotLight",value:function(){var e=new E.SpotLight("#7bccd7",1,1e3);e.position.set(0,27,0),e.castShadow=!0,this.scene.add(e)}},{key:"addRectLight",value:function(){var e=new E.RectAreaLight("#341212",1,2e3,2e3);e.position.set(5,50,50),e.lookAt(0,0,0),this.scene.add(e)}},{key:"addPointLight",value:function(e,t){var n=new E.PointLight(e,1,1e3,1);n.position.set(t.x,t.y,t.z),this.scene.add(n)}},{key:"addHelper",value:function(){var e=new E.GridHelper(500,50);this.scene.add(e);var t=new E.AxesHelper(500);this.scene.add(t)}},{key:"getMesh",value:function(e,t){var n=new E.Mesh(e,t);return n.castShadow=!0,n.receiveShadow=!0,n}}])&&Se(t.prototype,n),i&&Se(t,i),e}();function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=Ae(Ae({},_),{},{props:{instance:null},init:function(){return this.props.instance=new Me,this.props.instance.init(),this},setup:function(){},update:function(){},draw:function(){this.props.instance.draw()},destroy:function(){},onResize:function(){this.props.instance.onResize()},onMouseMove:function(e){this.props.instance.onMouseMove(e)},onClick:function(e){this.props.instance.onClick(e)}}),ze=n(8),De=function(e){E.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))};(De.prototype=Object.create(E.Object3D.prototype)).constructor=De;var Ie=function(e){De.call(this,e)};(Ie.prototype=Object.create(De.prototype)).constructor=Ie;var Ve=function(){var e,t,n,i,o=new E.Matrix4,r={camera:{fov:0,style:""},objects:new WeakMap},s=document.createElement("div");s.style.overflow="hidden",this.domElement=s;var a=document.createElement("div");a.style.WebkitTransformStyle="preserve-3d",a.style.transformStyle="preserve-3d",a.style.pointerEvents="none",s.appendChild(a);var c=/Trident/i.test(navigator.userAgent);function h(e){return Math.abs(e)<1e-10?0:e}function l(e){var t=e.elements;return"matrix3d("+h(t[0])+","+h(-t[1])+","+h(t[2])+","+h(t[3])+","+h(t[4])+","+h(-t[5])+","+h(t[6])+","+h(t[7])+","+h(t[8])+","+h(-t[9])+","+h(t[10])+","+h(t[11])+","+h(t[12])+","+h(-t[13])+","+h(t[14])+","+h(t[15])+")"}function p(e,t){var o=e.elements,r="matrix3d("+h(o[0])+","+h(o[1])+","+h(o[2])+","+h(o[3])+","+h(-o[4])+","+h(-o[5])+","+h(-o[6])+","+h(-o[7])+","+h(o[8])+","+h(o[9])+","+h(o[10])+","+h(o[11])+","+h(o[12])+","+h(o[13])+","+h(o[14])+","+h(o[15])+")";return c?"translate(-50%,-50%)translate("+n+"px,"+i+"px)"+t+r:"translate(-50%,-50%)"+r}this.getSize=function(){return{width:e,height:t}},this.setSize=function(o,r){n=(e=o)/2,i=(t=r)/2,s.style.width=o+"px",s.style.height=r+"px",a.style.width=o+"px",a.style.height=r+"px"};var u,f,d=(u=new E.Vector3,f=new E.Vector3,function(e,t){return u.setFromMatrixPosition(e.matrixWorld),f.setFromMatrixPosition(t.matrixWorld),u.distanceToSquared(f)});function m(e){for(var t=function(e){var t=[];return e.traverse((function(e){e instanceof De&&t.push(e)})),t}(e).sort((function(e,t){return r.objects.get(e).distanceToCameraSquared-r.objects.get(t).distanceToCameraSquared})),n=t.length,i=0,o=t.length;i<o;i++)t[i].element.style.zIndex=n-i}this.render=function(e,t){var u=t.projectionMatrix.elements[5]*i;if(r.camera.fov!==u&&(t.isPerspectiveCamera?(s.style.WebkitPerspective=u+"px",s.style.perspective=u+"px"):(s.style.WebkitPerspective="",s.style.perspective=""),r.camera.fov=u),!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.isOrthographicCamera)var f=-(t.right+t.left)/2,g=(t.top+t.bottom)/2;var y=t.isOrthographicCamera?"scale("+u+")translate("+h(f)+"px,"+h(g)+"px)"+l(t.matrixWorldInverse):"translateZ("+u+"px)"+l(t.matrixWorldInverse),v=y+"translate("+n+"px,"+i+"px)";r.camera.style===v||c||(a.style.WebkitTransform=v,a.style.transform=v,r.camera.style=v),function e(t,n,i){if(t instanceof De){var s;t instanceof Ie?(o.copy(n.matrixWorldInverse),o.transpose(),o.copyPosition(t.matrixWorld),o.scale(t.scale),o.elements[3]=0,o.elements[7]=0,o.elements[11]=0,o.elements[15]=1,s=p(o,i)):s=p(t.matrixWorld,i);var h=t.element,l=r.objects.get(t);if(void 0===l||l.style!==s){h.style.WebkitTransform=s,h.style.transform=s;var u={style:s};c&&(u.distanceToCameraSquared=d(n,t)),r.objects.set(t,u)}h.parentNode!==a&&a.appendChild(h)}for(var f=0,m=t.children.length;f<m;f++)e(t.children[f],n,i)}(e,t,y),c&&m(e)}};var We=function e(t,n,i,o,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var s=document.createElement("div");s.style.width="800px",s.style.height="450px";var a=document.createElement("iframe");a.style.width="800px",a.style.height="450px",a.style.border="0px",a.src=t,s.appendChild(a);var c=new De(s);return c.position.set(n,i,o),c.rotation.y=r,c};var Ke=window.pdfjsLib,Ue=function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.room_id="a07";var r=document.createElement("canvas");r.width=800,r.height=500;var s=r.getContext("2d");Ke.getDocument("./pdf/".concat(this.room_id,".pdf")).promise.then((function(e){var t;t=1,e.getPage(t).then((function(e){var t=e.getViewport({scale:800/720}),n={canvasContext:s,viewport:t};e.render(n).promise.then((function(){console.log("Page rendered")}))}))}));var a=new De(r);return a.position.set(t,n,i),a.rotation.y=o,a};function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe={props:{isEnable:!1},init:function(){var e=this.props,t=e.camera,n=e.scene,i=e.renderer,o=e.controls,r=document.getElementById(l);(t=new E.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,5e3)).position.set(0,0,2e3),n=new E.Scene,(i=new Ve).setSize(window.innerWidth,window.innerHeight),r.appendChild(i.domElement);var s=new E.Group;s.add(new Ue(0,300,450,0)),s.add(new We("https://www.youtube.com/embed/G9AtkiCESAg",1e3,0,0,-Math.PI/8)),s.add(new We("https://www.youtube.com/embed/9PVjlAm-A1A",-1e3,0,0,Math.PI/8)),s.add(new We("https://salty-waters-60310.herokuapp.com/a07",0,-300,450,0)),n.add(s),(o=new ze.a(t,i.domElement)).rotateSpeed=4;var a=document.getElementById(p);a.style.display="none",o.addEventListener("start",(function(){a.style.display=""})),o.addEventListener("end",(function(){a.style.display="none"})),this.props=Ge(Ge({},this.props),{camera:t,scene:n,renderer:i,controls:o}),this.addEvent()},draw:function(){var e=this.props,t=e.controls,n=e.renderer,i=e.scene,o=e.camera;t.update(),n.render(i,o)},onResize:function(){var e=this.props,t=(e.controls,e.renderer),n=(e.scene,e.camera);n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)},onKeyUp:function(e){e.keyCode===o&&this.hide()},addEvent:function(){var e=this;document.addEventListener(r,(function(t){return e.show()}))},show:function(){var e=document.getElementById(h),t=document.getElementById(a);this.props.isEnable=!0,e.style.visibility="visible",t.style.visibility="hidden"},hide:function(){var e=document.getElementById(h),t=document.getElementById(a);this.props.isEnable=!1,e.style.visibility="hidden",t.style.visibility="visible"}};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=Je(Je({},_),{},{props:{instance:null},init:function(){return this.props.instance=Fe,this.props.instance.init(),this},setup:function(){},update:function(){},draw:function(){this.props.instance.draw()},destroy:function(){},onResize:function(){this.props.instance.onResize()},onKeyUp:function(e){this.props.instance.onKeyUp(e)}});function Ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Qe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._scene=t,this._renderer=new E.WebGLRenderer({antialias:!0,alpha:!0}),this._renderer.setClearColor(new E.Color(0),0),this._renderer.setSize(P(),O()),this._renderer.setPixelRatio(1),this.clock=new E.Clock}var t,n,i;return t=e,(n=[{key:"update",value:function(){this._scene.update()}},{key:"onKeyUp",value:function(e){this._scene.onKeyUp(e)}}])&&Ze(t.prototype,n),i&&Ze(t,i),e}();function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=rt(e);if(t){var o=rt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return it(this,n)}}function it(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?ot(e):t}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(r,e);var t,n,i,o=nt(r);function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=o.call(this)).frame=0,e.prepareMesh=e.prepareMesh.bind(ot(e)),e.checkIntersection=e.checkIntersection.bind(ot(e)),e.meshes={},e.meshes[0]||(e.meshes[0]=e.prepareMesh()),e}return t=r,(n=[{key:"prepareMesh",value:function(){for(var e=new Float32Array(300),t=0;t<e.length;t+=3)e[t]=e[t+1]=e[t+2]=0;var n=new J.MeshLine;n.setGeometry(e,(function(e){return e}));var i=new J.MeshLineMaterial({color:11320570,lineWidth:.6,depthTest:!1});return this.mesh=new E.Mesh(n.geometry,i),this.mesh.geo=e,this.mesh.g=n,this.add(this.mesh),this.mesh}},{key:"checkIntersection",value:function(){this.mesh=this.meshes[0];for(var e=this.mesh.geo,t=this.mesh.g,n=0;n<e.length;n+=3)e[n]=1*e[n+3],e[n+1]=1*e[n+4],e[n+2]=1*e[n+5];var i=Math.random(),o=100*(2*Math.random()-1);i>.66?(e[e.length-6]>90&&o>0&&(o*=-1),e[e.length-6]<-90&&o<0&&(o*=-1),e[e.length-3]=e[e.length-6]+o,e[e.length-2]=e[e.length-5],e[e.length-1]=e[e.length-4]):i>.33?(e[e.length-5]>90&&o>0&&(o*=-1),e[e.length-5]<-90&&o<0&&(o*=-1),e[e.length-3]=e[e.length-6],e[e.length-2]=e[e.length-5]+o,e[e.length-1]=e[e.length-4]):(e[e.length-4]>90&&o>0&&(o*=-1),e[e.length-4]<-90&&o<0&&(o*=-1),e[e.length-3]=e[e.length-6],e[e.length-2]=e[e.length-5],e[e.length-1]=e[e.length-4]+o),t.setGeometry(e)}},{key:"update",value:function(){if(this.frame+=1,this.frame%4==0)for(var e in this.meshes)this.checkIntersection(e)}}])&&et(t.prototype,n),i&&et(t,i),r}(E.Object3D);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lt(e,t,n){return t&&ht(e.prototype,t),n&&ht(e,n),e}function pt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=mt(e);if(t){var o=mt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return dt(this,n)}}function dt(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gt=function(e){pt(n,e);var t=ft(n);function n(){var e;return ct(this,n),(e=t.call(this)).frame=1200,e.scene0=new yt,e.add(e.scene0),e.camPos=new E.Vector3(0,-30,0),e.camTarget=new E.Vector3(-50,-25,-50),e.camTargetBool_openingIsEnd=!1,e.camTargetBool_A=!1,e.camTargetBool_B=!1,e.camTargetBool_C=!1,e.camTargetBool_BACKSPACE=!1,e}return lt(n,[{key:"setup",value:function(){}},{key:"update",value:function(){this.frame+=1,this.camPos.x+=.01*(this.camTarget.x-this.camPos.x),this.camPos.y+=.01*(this.camTarget.y-this.camPos.y),this.camPos.z+=.01*(this.camTarget.z-this.camPos.z),this.scene0.position.set(this.camPos.x,this.camPos.y,this.camPos.z),350==this.frame&&(this.camTarget=new E.Vector3(-150,-100,-50)),700==this.frame&&(this.camTarget=new E.Vector3(-50,-25,-50)),1100==this.frame&&(this.camTarget=new E.Vector3(70,-80,-200)),1350==this.frame&&(this.camTarget=new E.Vector3(-50,-25,-50)),this.scene0.rotation.y=45*Math.PI/180,this.scene0.update()}},{key:"onKeyUp",value:function(e){e.keyCode==ie&&(console.log("show 7 panels!"),0==this.camTargetBool_openingIsEnd&&(this.camTargetBool_openingIsEnd=!0,this.camTarget=new E.Vector3(-270,-55,-350))),e.keyCode==oe&&(console.log("Please go to room_A!"),0==this.camTargetBool_A&&(this.camTargetBool_A=!0,this.camTarget=new E.Vector3(-122,-40,-42),this.camTargetBool_BACKSPACE=!1,this.camTargetBool_B=!0,this.camTargetBool_C=!0)),e.keyCode==re&&(console.log("Please go to room_B!"),0==this.camTargetBool_B&&(this.camTargetBool_B=!0,this.camTarget=new E.Vector3(-230,-85,-30),this.camTargetBool_BACKSPACE=!1,this.camTargetBool_A=!0,this.camTargetBool_C=!0)),e.keyCode==se&&(console.log("Please go to room_C!"),0==this.camTargetBool_C&&(this.camTargetBool_C=!0,this.camTarget=new E.Vector3(-338,-145,-18),this.camTargetBool_BACKSPACE=!1,this.camTargetBool_B=!0,this.camTargetBool_A=!0)),e.keyCode==ae&&(console.log("Please back to 7 panels!"),0==this.camTargetBool_BACKSPACE&&(this.camTargetBool_BACKSPACE=!0,this.camTarget=new E.Vector3(-270,-55,-350),this.camTargetBool_A=!1,this.camTargetBool_B=!1,this.camTargetBool_C=!1))}}]),n}(E.Scene),yt=function(e){pt(n,e);var t=ft(n);function n(){var e;return ct(this,n),(e=t.call(this)).scene1=new vt,e.add(e.scene1),e.scene2=new bt,e.add(e.scene2),e}return lt(n,[{key:"update",value:function(){this.scene1.update(),this.scene2.update()}}]),n}(E.Scene),vt=function(e){pt(n,e);var t=ft(n);function n(){var e;return ct(this,n),(e=t.call(this))._line=new st,e._line.position.set(150,70,150),e.add(e._line),e._line2=new st,e._line.position.set(150,70,150),e.add(e._line2),e}return lt(n,[{key:"update",value:function(){this._line.update(),this._line2.update()}}]),n}(E.Scene),bt=function(e){pt(n,e);var t=ft(n);function n(){var e;ct(this,n),(e=t.call(this)).frame=1200,e.meshList=[],e.meshGroup=new E.Group;var i=new E.MeshBasicMaterial({color:16777215,wireframe:!0,opacity:.9,transparent:!0});e.PlateNum=320,e.positions=[],e.posTarget=[];for(var o=0;o<e.PlateNum;o++)e.floorsize=27,e.geometry=new E.PlaneBufferGeometry(e.floorsize,e.floorsize),e.mesh=new E.Mesh(e.geometry,i),e.mesh.position.set(0,0,0),e.mesh.rotation.x=90*Math.PI/180,e.meshGroup.add(e.mesh),e.meshList.push(e.mesh),e.positions.push(e.mesh.position.x,e.mesh.position.y,e.mesh.position.z),e.posTarget.push(0,0,0);return e.clock=new E.Clock,e.tSpeed=2,e.easeElapsedTime=0,e.eansingBool=!0,e.add(e.meshGroup),e.openingIsEnd=!1,e}return lt(n,[{key:"update",value:function(){if(this.frame+=1,1==this.eansingBool){this.easeElapsedTime+=this.clock.getDelta(),this.t=this.easeElapsedTime/this.tSpeed,this.t>1&&(this.t=1),this.rate=this.t*this.t*(3-2*this.t);for(var e=0;e<this.meshList.length;e++){this.meshList[e].position.x=this.positions[3*e+0],this.meshList[e].position.y=this.positions[3*e+1],this.meshList[e].position.z=this.positions[3*e+2];for(var t=0;t<3;t++){var n=this.positions[3*e+t],i=this.posTarget[3*e+t];this.positions[3*e+t]=n*(1-this.rate)+i*this.rate}}}if(50==this.frame){for(var o=0;o<this.meshList.length;o++)for(var r=0;r<4;r++)o>=80*r&&o<80*(r+1)&&(this.posTarget[3*o+0]=25*r,this.posTarget[3*o+1]=0,this.posTarget[3*o+2]=0);this.easeElapsedTime=0,this.tSpeed=3}if(110==this.frame){for(var s=0;s<this.meshList.length;s++)for(var a=0;a<4;a++)if(s>=80*a&&s<80*(a+1))for(var c=0;c<4;c++)s>=80*a+20*c&&s<80*a+20*(c+1)&&(this.posTarget[3*s+0]=25*a,this.posTarget[3*s+1]=0,this.posTarget[3*s+2]=25*c);this.easeElapsedTime=0}if(170==this.frame){for(var h=0;h<this.meshList.length;h++)for(var l=0;l<4;l++)if(h>=80*l&&h<80*(l+1))for(var p=0;p<4;p++)if(h>=80*l+20*p&&h<80*l+20*(p+1))for(var u=0;u<20;u++)h>=80*l+20*p+1*u&&h<80*l+20*p+1*(u+1)&&(this.posTarget[3*h+0]=25*l,this.posTarget[3*h+1]=7*u,this.posTarget[3*h+2]=25*p);this.easeElapsedTime=0,this.tSpeed=4}if(280==this.frame){for(var f=0;f<this.meshList.length;f++)for(var d=0;d<4;d++)if(f>=80*d&&f<80*(d+1))for(var m=0;m<4;m++)if(f>=80*d+20*m&&f<80*d+20*(m+1))for(var g=0;g<10;g++)f>=80*d+20*m+2*g&&f<80*d+20*m+2*(g+1)&&(this.posTarget[3*f+0]=45*m,this.posTarget[3*f+1]=10*g,this.posTarget[3*f+2]=45*d);this.easeElapsedTime=0,this.tSpeed=4}if(430==this.frame){for(var y=0;y<this.meshList.length;y++)for(var v=0;v<4;v++)if(y>=80*v&&y<80*(v+1))for(var b=0;b<4;b++)if(y>=80*v+20*b&&y<80*v+20*(b+1))for(var w=0;w<10;w++)y>=80*v+20*b+2*w&&y<80*v+20*b+2*(w+1)&&(this.posTarget[3*y+0]=45*v,this.posTarget[3*y+1]=0,this.posTarget[3*y+2]=45*b);this.easeElapsedTime=0,this.tSpeed=7}if(490==this.frame){for(var T=0;T<this.meshList.length;T++)for(var P=0;P<4;P++)if(T>=80*P&&T<80*(P+1))for(var O=0;O<4;O++)if(T>=80*P+20*O&&T<80*P+20*(O+1))for(var _=0;_<10;_++)T>=80*P+20*O+2*_&&T<80*P+20*O+2*(_+1)&&(this.posTarget[3*T+0]=30*P,this.posTarget[3*T+1]=0,this.posTarget[3*T+2]=30*O);this.easeElapsedTime=0,this.tSpeed=4}if(550==this.frame){for(var E=0;E<this.meshList.length;E++)for(var j=0;j<8;j++)if(E>=40*j&&E<40*(j+1))for(var k=0;k<8;k++)if(E>=40*j+5*k&&E<40*j+5*(k+1))for(var C=0;C<5;C++)E>=40*j+5*k+1*C&&E<40*j+5*k+1*(C+1)&&(this.posTarget[3*E+0]=15*j,this.posTarget[3*E+1]=0,this.posTarget[3*E+2]=15*k);this.easeElapsedTime=0,this.tSpeed=4}if(600==this.frame){for(var x=0;x<this.meshList.length;x++)for(var S=0;S<8;S++)if(x>=40*S&&x<40*(S+1))for(var M=0;M<8;M++)if(x>=40*S+5*M&&x<40*S+5*(M+1))for(var B=0;B<5;B++)x>=40*S+5*M+1*B&&x<40*S+5*M+1*(B+1)&&(this.posTarget[3*x+0]=20*S,this.posTarget[3*x+1]=30*Math.sin((30*(S+M)+2*(this.frame+60))*Math.PI/180),this.posTarget[3*x+2]=20*M);this.easeElapsedTime=0}if(660==this.frame&&(this.eansingBool=!1),this.frame>=660&&this.frame<780){for(var A=0;A<this.meshList.length;A++)this.meshList[A].position.x=this.positions[3*A+0],this.meshList[A].position.y=this.positions[3*A+1],this.meshList[A].position.z=this.positions[3*A+2];for(var L=0;L<this.meshList.length;L++)for(var R=0;R<8;R++)if(L>=40*R&&L<40*(R+1))for(var z=0;z<8;z++)if(L>=40*R+5*z&&L<40*R+5*(z+1))for(var D=0;D<5;D++)L>=40*R+5*z+1*D&&L<40*R+5*z+1*(D+1)&&(this.positions[3*L+0]=20*R,this.positions[3*L+1]=30*Math.sin((30*(R+z)+2*this.frame)*Math.PI/180),this.positions[3*L+2]=20*z)}if(780==this.frame&&(this.eansingBool=!0),780==this.frame){for(var I=0;I<this.meshList.length;I++)for(var V=0;V<8;V++)if(I>=40*V&&I<40*(V+1))for(var W=0;W<8;W++)if(I>=40*V+5*W&&I<40*V+5*(W+1))for(var K=0;K<5;K++)I>=40*V+5*W+1*K&&I<40*V+5*W+1*(K+1)&&(this.posTarget[3*I+0]=80*Math.sin(2*I*Math.PI/180)+50,this.posTarget[3*I+1]=25,this.posTarget[3*I+2]=80*Math.cos(2*I*Math.PI/180)+50);this.easeElapsedTime=0,this.tSpeed=30}if(900==this.frame){for(var U=0;U<this.meshList.length;U++)for(var H=0;H<4;H++)if(U>=80*H&&U<80*(H+1))for(var G=0;G<4;G++)if(U>=80*H+20*G&&U<80*H+20*(G+1))for(var N=0;N<10;N++)U>=80*H+20*G+2*N&&U<80*H+20*G+2*(N+1)&&(this.posTarget[3*U+0]=4*G+50,this.posTarget[3*U+1]=1.5*N+25,this.posTarget[3*U+2]=4*H+50);this.easeElapsedTime=0,this.tSpeed=8}if(1e3==this.frame){for(var F=0;F<this.meshList.length;F++)for(var q=0;q<4;q++)if(F>=80*q&&F<80*(q+1))for(var J=0;J<4;J++)if(F>=80*q+20*J&&F<80*q+20*(J+1))for(var X=0;X<10;X++)F>=80*q+20*J+2*X&&F<80*q+20*J+2*(X+1)&&(this.posTarget[3*F+0]=70*Math.sin(4*F*Math.PI/180)+50,this.posTarget[3*F+1]=70*Math.cos(40*(q+J+X)*Math.PI/180)+25,this.posTarget[3*F+2]=-70*Math.sin(8*F*Math.PI/180)+50);this.easeElapsedTime=0,this.tSpeed=12}if(1150==this.frame){for(var Y=0;Y<this.meshList.length;Y++)for(var Z=0;Z<4;Z++)if(Y>=80*Z&&Y<80*(Z+1))for(var Q=0;Q<4;Q++)if(Y>=80*Z+20*Q&&Y<80*Z+20*(Q+1))for(var $=0;$<10;$++)Y>=80*Z+20*Q+2*$&&Y<80*Z+20*Q+2*($+1)&&(this.posTarget[3*Y+0]=25*Z,this.posTarget[3*Y+1]=0,this.posTarget[3*Y+2]=25*Q);this.easeElapsedTime=0,this.tSpeed=4}if(1270==this.frame){for(var ee=0;ee<this.meshList.length;ee++)for(var te=0;te<4;te++)if(ee>=80*te&&ee<80*(te+1))for(var ne=0;ne<4;ne++)if(ee>=80*te+20*ne&&ee<80*te+20*(ne+1))for(var ie=0;ie<20;ie++)ee>=80*te+20*ne+1*ie&&ee<80*te+20*ne+1*(ie+1)&&(this.posTarget[3*ee+0]=20*te,this.posTarget[3*ee+1]=5*ie,this.posTarget[3*ee+2]=20*ne);this.easeElapsedTime=0,this.tSpeed=4}if(1370==this.frame){for(var oe=0;oe<this.meshList.length;oe++)for(var re=0;re<4;re++)if(oe>=80*re&&oe<80*(re+1))for(var se=0;se<4;se++)if(oe>=80*re+20*se&&oe<80*re+20*(se+1))for(var ae=0;ae<10;ae++)oe>=80*re+20*se+2*ae&&oe<80*re+20*se+2*(ae+1)&&(this.posTarget[3*oe+0]=25*(re+ae),this.posTarget[3*oe+1]=15*ae,this.posTarget[3*oe+2]=25*(se+ae));this.easeElapsedTime=0,this.tSpeed=10}1470==this.frame&&0==this.openingIsEnd&&(this.openingIsEnd=!0)}}]),n}(E.Scene),wt=window.AFRAME.registerComponent(g,{props:{},modules:{},init:function(){console.log("Background Component Init."),this.props.scene=this.el.object3D,this.props.container=this.el.appendChild(document.createElement("a-entity")),this.modules.scene=new gt,this.modules.scene.setup(),this.modules.app=new Qe(this.modules.scene),this.props.container.object3D.add(this.modules.scene)},tick:function(){this.modules.app.update()},onClick:function(e){console.log("click")}});n(11);function Tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Pt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parameter=t||{},this.scene=t.scene,this.index=t.index,this.name="poster".concat(this.index),this.title={container:t.titleContainer,text:this.parameter.posterTitle,position:new E.Vector3,rotation:new E.Vector3},this.imgPath=this.parameter.imgPath,this.arrangeRatio=.15,this.boardWidth=80*this.arrangeRatio,this.boardHeight=45*this.arrangeRatio,this.titleOffset=45*this.arrangeRatio,this.fontSize=3.5,this.entity=null,this.position=new E.Vector3,this.rotation=new E.Vector3,this.scale=new E.Vector3(this.boardWidth,this.boardHeight,1),this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.createLabel(),this.createPlaneObject()}},{key:"createPlaneObject",value:function(){this.entity=document.createElement("a-entity"),this.entity.setAttribute("geometry","primitive: plane"),this.entity.setAttribute("material","shader: flat; color: #222; src: ".concat(this.imgPath)),this.entity.setAttribute(w,""),this.entity.setAttribute("class",m),this.entity.instance=this}},{key:"setPosition",value:function(e,t,n){this.position.set(e,t,n),this.title.position.set(e,t-this.titleOffset,n),this.lookAt()}},{key:"lookAt",value:function(){var e=180+180*Math.atan2(this.position.x,this.position.z)/Math.PI,t=180+180*Math.atan2(this.title.position.x,this.title.position.z)/Math.PI;this.rotation.set(0,e,0),this.title.rotation.set(0,t,0),this.draw()}},{key:"draw",value:function(){var e=this.position,t=e.x,n=e.y,i=e.z,o=this.rotation,r=o.x,s=o.y,a=o.z,c=this.scale,h=c.x,l=c.y,p=c.z,u=this.title.position,f=u.x,d=u.y,m=u.z,g=this.title.rotation,y=g.x,v=g.y,b=g.z;this.entity.setAttribute("position",[t,n,i].join(" ")),this.entity.setAttribute("rotation",[r,s,a].join(" ")),this.entity.setAttribute("scale",[h,l,p].join(" ")),this.title.entity.setAttribute("position",[f,d,m].join(" ")),this.title.entity.setAttribute("rotation",[y,v,b].join(" ")),this.title.entity.setAttribute("scale",[h,l,h].join(" "))}},{key:"createLabel",value:function(){this.galleryStage=document.getElementById(c),this.title.source=document.createElement("div"),this.title.source.setAttribute("id","poster".concat(this.index)),this.title.source.insertAdjacentHTML("afterbegin",'\n    <div class="gallery_poster_title">'.concat(this.title.text,"</div>\n    ")),this.galleryStage.appendChild(this.title.source),this.title.entity=document.createElement("a-entity"),this.title.entity.setAttribute("geometry","primitive: plane; width: 1; height: 1"),this.title.entity.setAttribute("material","shader: html; transparent: true; target: #poster".concat(this.index)),this.title.container.appendChild(this.title.entity)}}])&&Tt(t.prototype,n),i&&Tt(t,i),e}();function Ot(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e){this.scene=e,this.setup(),this.addBoard()}},{key:"setup",value:function(){this.containers={image:null,title:null},this.posterData=ke,this.boardLength=this.posterData.imgPath.length,this.boardPosRadius=20,this.boardAngle=360/this.boardLength,this.categoryAngle=360+this.boardAngle/2,this.boardPositionY=0,this.boardList=[]}},{key:"draw",value:function(){}},{key:"addBoard",value:function(){var e=document.createElement("a-entity"),t=document.createElement("a-entity");this.containers.image=this.scene.appendChild(e),this.containers.title=this.scene.appendChild(t);for(var n=0;n<10;n++){var i={scene:this.scene,index:n,imgPath:this.posterData.imgPath[n],posterTitle:this.posterData.posterTitle[n],titleContainer:this.containers.title},o=new Pt(i);o.setPosition(this.boardPosRadius*Math.cos(E.Math.degToRad(n*this.boardAngle+this.categoryAngle)),this.boardPositionY,this.boardPosRadius*Math.sin(E.Math.degToRad(n*this.boardAngle+this.categoryAngle))),o.lookAt(),this.containers.image.appendChild(o.entity),this.boardList.push(o)}}}])&&Ot(t.prototype,n),i&&Ot(t,i),e}(),Et=window.AFRAME.registerComponent(y,{props:{},modules:{},init:function(){var e=this;console.log("Gallery Component Init."),this.props.scene=this.el.object3D,this.props.container=this.el.appendChild(document.createElement("a-entity")),setTimeout((function(){e.modules.gallery=new _t,e.modules.gallery.init(e.props.container),console.dir(e.props.container)}),1e3)},tick:function(){null!=this.modules.gallery&&this.modules.gallery.draw()},onKeyUp:function(e){console.log(e.keyCode)}});function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xt={props:{isEnable:!1},init:function(e){var t=this.props,n=t.camera,i=t.scene,o=t.renderer,r=t.controls;(n=new E.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,5e3)).position.set(0,0,0),i=e,(o=new Ve).setSize(window.innerWidth,window.innerHeight),i.add(new We("https://salty-waters-60310.herokuapp.com/a07",0,0,-2,0)),this.props=kt(kt({},this.props),{camera:n,scene:i,renderer:o,controls:r}),this.addEvent()},draw:function(){var e=this.props,t=(e.controls,e.renderer),n=e.scene,i=e.camera;t.render(n,i)},onResize:function(){var e=this.props,t=(e.controls,e.renderer),n=(e.scene,e.camera);n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)},onKeyUp:function(e){},addEvent:function(){var e=this;document.addEventListener(r,(function(t){return e.show(t)}))},show:function(e){console.dir(e.detail.index)},hide:function(){}},St=window.AFRAME.registerComponent(v,{props:{},modules:{},init:function(){console.log("Detail Component Init."),this.props.scene=this.el.object3D,this.props.container=this.el.appendChild(document.createElement("a-entity")),this.modules.detail=xt,this.modules.detail.init(this.props.container.object3D),this.props.scene.add(this.props.container.object3D)},tick:function(){this.modules.detail.draw()}}),Mt=window.AFRAME.registerComponent(b,{props:{},init:function(){this.el.addEventListener("raycaster-intersection",(function(e){var t=e.detail.intersections;t.length>0&&t[0].object.material.color.set(16777215)})),this.el.addEventListener("raycaster-intersection-cleared",(function(e){for(var t=e.detail.clearedEls,n=0;n<t.length;n++){var i=t[n].object3DMap;"mesh"in i&&i.mesh.material.color.set(2236962)}}))}}),Bt=window.AFRAME.registerComponent(w,{init:function(){var e=this;this.el.addEventListener("click",(function(t){e.el.object3DMap.mesh.material.color.set(16711680),document.dispatchEvent(new CustomEvent(r,{detail:{category:1,index:e.el.instance.index}}))}))}});function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zt=Lt(Lt({},_),{},{props:{elements:{}},components:{},init:function(){return console.log("XR App Init."),this.components.background=wt,this.components.gallery=Et,this.components.detail=St,this.components.raycastCheck=Mt,this.components.raycastTarget=Bt,this},setup:function(){this.props.elements.scene=document.getElementById(u),this.attachComponent(this.props.elements.scene,g),this.attachComponent(this.props.elements.scene,y),this.props.elements.xr_player=this.attachComponent(document.getElementById(f),b),this.props.elements.xr_raycaster=document.getElementById(d),this.attachComponent(this.props.elements.xr_raycaster,"raycaster","objects: .".concat(m)),this.attachComponent(this.props.elements.xr_raycaster,"cursor","fuse: false")},attachComponent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=e?e.setAttribute(t,n):null},onKeyUp:function(e){this.components.gallery.prototype.onKeyUp(e)}});function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){Vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wt=It(It({},_),{},{props:{instance:null},init:function(){return this.props.instance=zt.init(),this},setup:function(){this.props.instance.setup()},update:function(){},draw:function(){},destroy:function(){},onResize:function(){this.props.instance.onResize()},onMouseMove:function(e){this.props.instance.onMouseMove(e)},onKeyUp:function(e){this.props.instance.onKeyUp(e)}}),Kt=(n(29),{props:{isPause:!1},instances:{},init:function(){return T()?this.instances.xr=Wt.init():(this.instances.background=_e.init(),this.instances.gallery=Re.init(),this.instances.detail=Ye.init()),this.addEvent(),this.setup(),this.loadCSVandConvertToArray2D(),this},setup:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.instances.forIn((function(e,t){return t.setup()})),this.update()},update:function(){var e=this;this.instances.forIn((function(e,t){return t.update()})),window.requestAnimationFrame((function(){e.props.isPause||e.update()})),this.draw()},draw:function(){this.instances.forIn((function(e,t){return t.draw()}))},destroy:function(){},pause:function(){this.props.isPause=!0},resume:function(){this.props.isPause=!1},onResize:function(){this.instances.forIn((function(e,t){return t.onResize()}))},onMouseMove:function(e){this.instances.forIn((function(t,n){return n.onMouseMove(e)}))},onKeyUp:function(e){this.instances.forIn((function(t,n){return n.onKeyUp(e)}))},onClick:function(e){this.instances.forIn((function(t,n){return n.onClick(e)}))},addEvent:function(e){},loadCSVandConvertToArray2D:function(){!function(e,t){if(null!=e){var n=new XMLHttpRequest;n.addEventListener("load",(function(e){var n=e.target.responseText;t({result:n})})),n.open("GET",e,!0),n.send()}}("../data/kanto_hokkaido.csv",(function(e){var t=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e)return[];for(var t=[],n=e.split("\n"),i=0;i<n.length;i++)t[i]=n[i].split(",");return t}(e.result);console.group(),console.log("Data from csv"),console.dir(t),console.groupEnd()}))}}),Ut=Ut||{};Ut.PosterSession=Ut.PosterSession||{},Ut.PosterSession.App={delegator:null,init:function(){this.addExtensions(),this.delegator=Kt.init(),this.addEvent()},onResize:function(){this.delegator.onResize()},onMouseMove:function(e){this.delegator.onMouseMove(e)},onKeyUp:function(e){this.delegator.onKeyUp(e)},onClick:function(e){this.delegator.onClick(e)},addEvent:function(){var e=this;window.addEventListener("resize",(function(){return e.onResize()})),window.addEventListener("mousemove",(function(t){return e.onMouseMove(t)})),window.addEventListener("keyup",(function(t){return e.onKeyUp(t)})),document.addEventListener("click",(function(t){return e.onClick(t)}))},addExtensions:function(){i.init()}},window.addEventListener("DOMContentLoaded",(function(){!function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s.enable=e}(document.getElementsByTagName("a-scene").length>0),console.log("VRMode: ".concat(T())),Ut.PosterSession.App.init()}))}});